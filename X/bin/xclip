#!/bin/bash

has_opts() {
    declare x
    for x in "$@"; do
        case $x in
            --) return 1 ;;
            -i) continue ;;
            -*) return 0 ;;
        esac
    done
    return 1
}

xclip=$(wrapped "$0")

if has_opts "$@"; then
    exec "$xclip" "$@"
else
    "$xclip" -filter -selection primary "$@" | \
    "$xclip" -selection clipboard
    exit ${PIPESTATUS[0]}
fi
