# tmux-256color instead of screen-256color enables italics
set -g default-terminal "tmux-256color"

# Tc enables true color
set -ag terminal-overrides ",*256col*:Tc,*alacritty*:Tc,*kitty*:Tc"

# enable focus events for auto read in nvim
set -g focus-events on

# allow passthrough so clipboard-provider can send wrapped OSC52
set -g allow-passthrough on
set -g set-clipboard off

# alternative clipboard provider
bind-key -T copy-mode-vi Y send-keys -X copy-pipe-and-cancel "env COPY_PROVIDERS=desktop clipboard-provider copy"

setw -g mode-keys vi

set -g prefix C-a
unbind C-b
bind C-a send-prefix

bind c new-window
bind n next
bind p prev
bind l select-pane -R
bind h select-pane -L
bind k select-pane -U
bind j select-pane -D
bind s split-window -v
bind v split-window -h

bind c-c new-window
bind c-n next
bind c-p prev
bind c-l select-pane -R
bind c-h select-pane -L
bind c-k select-pane -U
bind c-j select-pane -D
bind c-s split-window -v
bind c-v split-window -h

bind H join-pane -bfht '{left}'
bind L join-pane -fht '{right}'
bind K join-pane -bft '{top}'
bind J join-pane -ft '{bottom}'

bind @ join-pane -h -t !
bind P swap-window -d -t -
bind N swap-window -d -t +
bind 8 resize-pane -x 80
bind 9 resize-pane -x 120
bind = select-layout tiled
bind S switch-client -l

# use bracketed paste, if the running application (vim/emacs/weechat) has
# sent the terminal code to enable it.
bind-key ] paste-buffer -p

set -wg aggressive-resize on
set -wg automatic-rename off
set -g allow-rename on
set -g renumber-windows on
set -g update-environment 'DISPLAY COLORTERM SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY DBUS_SESSION_BUS_ADDRESS WAYPIPE_SOCK WAYLAND_DISPLAY'

set -g pane-border-lines heavy
set -g pane-border-style fg=#333333,bg=default
set -g pane-active-border-style fg=#e0af68,bg=default
set -g pane-border-status off
set -g pane-border-format ''
set-hook -g window-layout-changed 'set -wF pane-border-status "#{?#{==:#{window_panes},1},off,top}"'

# http://comments.gmane.org/gmane.emacs.vim-emulation/1557
set -s escape-time 0

# Default with tmux: prepended for kitty to match on for key mappings.
set -g set-titles-string "tmux:#S:#I:#W - \"#T\" #{session_alerts}"
set -g set-titles on

#set -g status-left "#{?session_many_attached,=================,}"
#set -g status-right "#{?session_many_attached,=================,}"
#set -g status-justify "centre"
#set -g window-status-format " #I "
#set -g window-status-current-format "[#I]"
#set -g window-status-current-style "fg=default,bold"
#source /usr/local/lib/python3.9/site-packages/powerline/bindings/tmux/powerline.conf
source /usr/share/tmux/powerline.conf

# https://github.com/tmux-plugins/tpm
# https://github.com/fcsonline/tmux-thumbs
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @thumbs-key f
set -g @thumbs-osc52 1
run '~/.tmux/plugins/tpm/tpm'

#run-shell ~/.tmux/plugins/tmux-thumbs/tmux-thumbs.tmux

source -q ~/.tmux.conf.mine
